<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cigarette Reduction Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f3f4f6;
      transition: background-color 0.3s;
    }
    .progress-ring__circle {
      stroke-dasharray: 100;
      stroke-dashoffset: 100;
      transition: stroke-dashoffset 0.35s;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
    }
    .health-card {
      transition: all 0.3s ease;
    }
    .health-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    .motivation-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }
  </style>
</head>
<body class="min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <header class="text-center mb-10">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800">
        Cigarette Reduction Tracker
      </h1>
      <p class="text-gray-600 mt-2">
        Track your progress and celebrate your successes
      </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <!-- Today's Count Card -->
      <div
        class="bg-white rounded-xl shadow-md p-6 text-center border-l-4 border-blue-500"
      >
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Today</h3>
        <div class="flex justify-center items-center">
          <span id="todayCount" class="text-5xl font-bold text-blue-600">0</span>
          <span class="text-gray-500 ml-1">cigarettes</span>
        </div>
        <p id="todayComparison" class="text-sm text-gray-500 mt-2">Loading...</p>
      </div>

      <!-- Weekly Count Card -->
      <div
        class="bg-white rounded-xl shadow-md p-6 text-center border-l-4 border-green-500"
      >
        <h3 class="text-lg font-semibold text-gray-700 mb-2">This Week</h3>
        <div class="flex justify-center items-center">
          <span id="weekCount" class="text-5xl font-bold text-green-600">0</span>
          <span class="text-gray-500 ml-1">cigarettes</span>
        </div>
        <p id="weekComparison" class="text-sm text-gray-500 mt-2">Loading...</p>
      </div>

      <!-- Progress Circle -->
      <div
        class="bg-white rounded-xl shadow-md p-6 text-center border-l-4 border-purple-500"
      >
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Your Progress</h3>
        <div class="relative w-24 h-24 mx-auto">
          <svg class="w-full h-full" viewBox="0 0 36 36">
            <path
              d="M18 2.0845
                                a 15.9155 15.9155 0 0 1 0 31.831
                                a 15.9155 15.9155 0 0 1 0 -31.831"
              fill="none"
              stroke="#e6e6e6"
              stroke-width="3"
            />
            <path
              id="progressBar"
              class="progress-ring__circle"
              stroke-linecap="round"
              d="M18 2.0845
                                a 15.9155 15.9155 0 0 1 0 31.831
                                a 15.9155 15.9155 0 0 1 0 -31.831"
              fill="none"
              stroke="#4f46e5"
              stroke-width="3"
              stroke-dasharray="100"
              stroke-dashoffset="100"
            />
          </svg>
          <div class="absolute inset-0 flex items-center justify-center">
            <span id="progressPercent" class="text-lg font-bold text-purple-600"
              >0%</span
            >
          </div>
        </div>
        <p id="progressText" class="text-sm text-gray-600 mt-2">Getting started</p>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- Your Health Journey Block -->
      <div class="bg-white rounded-xl shadow-md p-6">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Your Health Journey</h2>
        <p class="text-gray-700">
          Every cigarette you don't smoke is a step towards better health. Keep
          track of your progress and celebrate your victories!
        </p>
      </div>

      <!-- Input Form -->
      <div class="bg-white rounded-xl shadow-md p-6">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Add Your Cigarettes</h2>
        <form id="cigaretteForm" class="space-y-4">
          <div>
            <label
              for="count"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Number of Cigarettes</label
            >
            <input
              type="number"
              id="count"
              min="1"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>
          <button
            type="submit"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-300"
          >
            Log Cigarettes
          </button>
        </form>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- Health Benefits -->
      <div class="bg-white rounded-xl shadow-md p-6 motivation-card">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Health Progress</h2>
        <div id="healthBenefits" class="space-y-3"></div>
      </div>

      <!-- Recent Entries -->
      <div class="bg-white rounded-xl shadow-md p-6 mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Recent Entries</h2>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Date
                </th>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Time
                </th>
                <th
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Count
                </th>
              </tr>
            </thead>
            <tbody id="entriesList" class="bg-white divide-y divide-gray-200"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Motivation Section -->
    <div class="bg-indigo-50 rounded-xl shadow-md p-6 mb-8">
      <h2 class="text-xl font-semibold text-indigo-800 mb-4">You're Doing Great!</h2>
      <div class="flex flex-col md:flex-row items-center">
        <div class="md:w-1/4 mb-4 md:mb-0 flex justify-center">
          <div
            class="w-32 h-32 rounded-full bg-indigo-100 flex items-center justify-center"
          >
            <img
              src="https://placehold.co/300x300"
              alt="Inspirational graphic illustrating health progress through smoke reduction with a clean lung image showing improved respiratory health"
              class="w-full h-full rounded-full object-cover"
            />
          </div>
        </div>
        <div class="md:w-3/4 md:pl-6">
          <p id="motivationMessage" class="text-gray-700 mb-4">
            Every cigarette you don't smoke is a victory. Keep track of your
            progress here and celebrate your journey to better health!
          </p>
          <div
            id="milestoneMessage"
            class="hidden bg-white p-3 rounded-lg border border-indigo-200"
          >
            <p class="text-sm text-gray-700">
              <span id="milestoneText"></span>
              <span class="font-semibold text-indigo-600">Congratulations!</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Health Impact Visualization -->
    <div class="bg-white rounded-xl shadow-md p-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Your Health Journey</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div
          class="health-card bg-red-50 p-4 rounded-lg border border-red-100"
        >
          <div class="flex items-center mb-2">
            <div
              class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mr-3"
            >
              <i class="fas fa-heartbeat text-red-500 text-xl"></i>
            </div>
            <h3 class="font-medium text-gray-700">Heart Health</h3>
          </div>
          <p class="text-sm text-gray-600" id="heartHealth">
            20% less risk of heart disease
          </p>
        </div>
        <div
          class="health-card bg-blue-50 p-4 rounded-lg border border-blue-100"
        >
          <div class="flex items-center mb-2">
            <div
              class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mr-3"
            >
              <i class="fas fa-lungs text-blue-500 text-xl"></i>
            </div>
            <h3 class="font-medium text-gray-700">Lung Capacity</h3>
          </div>
          <p class="text-sm text-gray-600" id="lungCapacity">15% improvement</p>
        </div>
        <div
          class="health-card bg-green-50 p-4 rounded-lg border border-green-100"
        >
          <div class="flex items-center mb-2">
            <div
              class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mr-3"
            >
              <i class="fas fa-coins text-green-500 text-xl"></i>
            </div>
            <h3 class="font-medium text-gray-700">Money Saved</h3>
          </div>
          <p class="text-sm text-gray-600" id="moneySaved">₹25 saved this week</p>
        </div>
      </div>
    </div>

    <footer class="absolute bottom-4 right-4">
      <p class="text-gray-500 text-sm">Designed by Shazaan</p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Initialize localStorage if not exists
      if (!localStorage.getItem('cigaretteData')) {
        localStorage.setItem(
          'cigaretteData',
          JSON.stringify({
            entries: [],
            dailyGoal: 5,
            previousDailyAverage: 10,
            previousWeeklyAverage: 70,
            milestones: [5, 10, 20, 50, 100],
          })
        );
      }

      let data = JSON.parse(localStorage.getItem('cigaretteData'));
      const form = document.getElementById('cigaretteForm');
      const entriesList = document.getElementById('entriesList');
      const todayCountEl = document.getElementById('todayCount');
      const weekCountEl = document.getElementById('weekCount');
      const todayComparisonEl = document.getElementById('todayComparison');
      const weekComparisonEl = document.getElementById('weekComparison');
      const progressBar = document.getElementById('progressBar');
      const progressPercent = document.getElementById('progressPercent');
      const progressText = document.getElementById('progressText');
      const motivationMessage = document.getElementById('motivationMessage');
      const milestoneMessage = document.getElementById('milestoneMessage');
      const milestoneText = document.getElementById('milestoneText');
      const healthBenefits = document.getElementById('healthBenefits');

      // Health impact elements
      const heartHealth = document.getElementById('heartHealth');
      const lungCapacity = document.getElementById('lungCapacity');
      const moneySaved = document.getElementById('moneySaved');

      const motivations = [
        "Every cigarette you don't smoke is a small victory for your health!",
        'Your body is already beginning to repair itself - keep it up!',
        "Think of all the extra time you'll have by not taking smoking breaks!",
        "The cravings will pass - you're stronger than you think!",
        'Your future self will thank you for the healthier choices you’re making today.',
        'Each cigarette avoided is a step toward better breathing and more energy!',
        "You're not giving up cigarettes - you're gaining health, money and freedom!",
        "The first few days are the hardest - you've got this!",
        'Every cigarette you skip is another hour your body has to heal.',
        "Imagine how proud you'll be when you reach your goal!",
      ];

      const healthBenefitsList = [
        {
          text: '20 minutes after quitting: Your blood pressure and pulse return to normal.',
          icon: 'heartbeat',
        },
        {
          text: '8 hours: Carbon monoxide levels in blood drop to normal, oxygen increases.',
          icon: 'wind',
        },
        {
          text: '24 hours: Chance of heart attack decreases.',
          icon: 'heart',
        },
        {
          text: '48 hours: Nerve endings start regrowing, senses improve.',
          icon: 'hand-sparkles',
        },
        {
          text: '2 weeks to 3 months: Circulation improves, lung function increases.',
          icon: 'tint',
        },
        {
          text: '1 to 9 months: Coughing, fatigue and shortness of breath decrease.',
          icon: 'lungs',
        },
        {
          text: '1 year: Risk of coronary heart disease is half that of a smoker.',
          icon: 'heartbeat',
        },
        {
          text: '5-15 years: Stroke risk reduces to that of a non-smoker.',
          icon: 'brain',
        },
        {
          text: '10 years: Risk of lung cancer drops to half that of a smoker.',
          icon: 'lungs',
        },
        {
          text: '15 years: Risk of coronary heart disease is same as non-smoker.',
          icon: 'heart',
        },
      ];

      // Update all displays
      function updateDisplays() {
        updateTodayCount();
        updateWeekCount();
        updateEntriesList();
        updateProgress();
        updateHealthBenefits();
        updateMotivation();
        updateHealthImpact();
      }

      // Update today's count display
      function updateTodayCount() {
        const today = new Date().toISOString().split('T')[0];
        const todayEntries = data.entries.filter((entry) => entry.date === today);
        const todayTotal = todayEntries.reduce(
          (sum, entry) => sum + parseInt(entry.count),
          0
        );

        todayCountEl.textContent = todayTotal;

        if (data.previousDailyAverage) {
          const difference = data.previousDailyAverage - todayTotal;
          if (difference > 0) {
            todayComparisonEl.textContent = `↓ ${difference} less than your average`;
            todayComparisonEl.className = 'text-sm text-green-600 mt-2';
          } else if (difference < 0) {
            todayComparisonEl.textContent = `↑ ${Math.abs(
              difference
            )} more than your average`;
            todayComparisonEl.className = 'text-sm text-red-600 mt-2';
          } else {
            todayComparisonEl.textContent = 'Same as your average';
            todayComparisonEl.className = 'text-sm text-gray-500 mt-2';
          }
        }
      }

      // Update week's count display
      function updateWeekCount() {
        const currentDate = new Date();
        const oneWeekAgo = new Date(
          currentDate.getTime() - 7 * 24 * 60 * 60 * 1000
        );

        const weekEntries = data.entries.filter((entry) => {
          const entryDate = new Date(entry.date);
          return entryDate >= oneWeekAgo;
        });

        const weekTotal = weekEntries.reduce(
          (sum, entry) => sum + parseInt(entry.count),
          0
        );
        weekCountEl.textContent = weekTotal;

        if (data.previousWeeklyAverage) {
          const difference = data.previousWeeklyAverage - weekTotal;
          if (difference > 0) {
            weekComparisonEl.textContent = `↓ ${difference} less than your weekly average`;
            weekComparisonEl.className = 'text-sm text-green-600 mt-2';
          } else if (difference < 0) {
            weekComparisonEl.textContent = `↑ ${Math.abs(
              difference
            )} more than your weekly average`;
            weekComparisonEl.className = 'text-sm text-red-600 mt-2';
          } else {
            weekComparisonEl.textContent = 'Same as your weekly average';
            weekComparisonEl.className = 'text-sm text-gray-500 mt-2';
          }
        }
      }

      // Update entries list
      function updateEntriesList() {
        entriesList.innerHTML = '';

        if (data.entries.length === 0) {
          entriesList.innerHTML =
            '<tr><td colspan="3" class="text-center py-4 text-gray-500">No entries yet. Add your first cigarette!</td></tr>';
          return;
        }

        // Show latest 7 entries
        const latestEntries = data.entries.slice(0, 7);
        latestEntries.forEach((entry) => {
          const tr = document.createElement('tr');
          tr.className = 'hover:bg-gray-100';

          tr.innerHTML = `
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${entry.date}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${entry.time}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${entry.count}</td>
          `;
          entriesList.appendChild(tr);
        });
      }

      // Update health benefits content dynamically
      function updateHealthBenefits() {
        healthBenefits.innerHTML = '';
        healthBenefitsList.forEach((benefit) => {
          const div = document.createElement('div');
          div.className = 'flex items-center space-x-3';

          const icon = document.createElement('i');
          icon.className = `fas fa-${benefit.icon} text-indigo-600 text-xl`;
          div.appendChild(icon);

          const text = document.createElement('p');
          text.textContent = benefit.text;
          text.className = 'text-gray-700 text-sm';
          div.appendChild(text);

          healthBenefits.appendChild(div);
        });
      }

      // Update progress bar and text
      function updateProgress() {
        const dailyGoal = data.dailyGoal || 5;
        const todayTotal = data.entries
          .filter(
            (entry) => entry.date === new Date().toISOString().split('T')[0]
          )
          .reduce((sum, entry) => sum + entry.count, 0);

        const progress = Math.min(1, todayTotal / dailyGoal);
        const progressPercentValue = Math.round(progress * 100);

        progressBar.style.strokeDashoffset = 100 - progressPercentValue;
        progressPercent.textContent = `${progressPercentValue}%`;

        if (progress >= 1) {
          progressText.textContent = "Amazing! You've met your goal today!";
          progressText.className = 'text-sm text-green-600 mt-2';
        } else if (progress >= 0.5) {
          progressText.textContent = 'Great progress toward your goal!';
          progressText.className = 'text-sm text-blue-600 mt-2';
        } else {
          progressText.textContent = 'Keep working toward your goal!';
          progressText.className = 'text-sm text-purple-600 mt-2';
        }
      }

      // Update motivation message randomly
      function updateMotivation() {
        const idx = new Date().getSeconds() % motivations.length;
        motivationMessage.textContent = motivations[idx];
      }

      // Update health impact stats
      function updateHealthImpact() {
        const weekEntries = data.entries.filter((entry) => {
          const entryDate = new Date(entry.date);
          const oneWeekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);
          return entryDate >= oneWeekAgo;
        });

        const weekTotal = weekEntries.reduce(
          (sum, entry) => sum + entry.count,
          0
        );
        const savedAmount = weekTotal * 0.5; // Assuming ₹0.5 saved per cigarette not smoked

        heartHealth.textContent = `${
          20 + new Date().getSeconds() % 5
        }% less risk of heart disease`;
        lungCapacity.textContent = `${15 + new Date().getSeconds() % 5}% improvement`;
        moneySaved.textContent = `₹${savedAmount.toFixed(2)} saved this week`;
      }

      // Check and display milestone messages
      function checkMilestones() {
        const totalCount = data.entries.reduce((sum, entry) => sum + entry.count, 0);
        let milestoneAchieved = null;
        for (const milestone of data.milestones) {
          if (totalCount >= milestone) {
            milestoneAchieved = milestone;
          }
        }
        if (milestoneAchieved !== null) {
          milestoneText.textContent = `You've reached ${milestoneAchieved} cigarettes logged!`;
          milestoneMessage.classList.remove('hidden');
          setTimeout(() => {
            milestoneMessage.classList.add('hidden');
          }, 5000);
        }
      }

      // Initialize UI
      updateDisplays();
    });
  </script>
</body>
</html>